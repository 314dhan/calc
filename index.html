<html>

<head>
    <title>Kalkulator Sederhana</title>
    <!-- Memasukkan Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <h1 class="text-center">Kalkulator Sederhana</h1>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div id="calculator-display" class="form-control mb-3"
                    style="height: 100px; font-size: 36px; text-align: right;">0</div>
                <div id="calculator-buttons" class="btn-group btn-group-lg btn-group-toggle" data-toggle="buttons"
                    style="display: flex; flex-wrap: wrap;">
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(7)">7</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(8)">8</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(9)">9</button>
                    <button type="button" class="btn btn-danger" style="flex: 1 0 25%;"
                        onclick="inputOperator('+')">+</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(4)">4</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(5)">5</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(6)">6</button>
                    <button type="button" class="btn btn-danger" style="flex: 1 0 25%;"
                        onclick="inputOperator('-')">-</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(1)">1</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(2)">2</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(3)">3</button>
                    <button type="button" class="btn btn-danger" style="flex: 1 0 25%;"
                        onclick="inputOperator('*')">*</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputNumber(0)">0</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1 0 25%;"
                        onclick="inputDecimal()">.</button>
                    <button type="button" class="btn btn-success" style="flex: 1 0 25%;"
                        onclick="calculate()">=</button>
                    <button type="button" class="btn btn-danger" style="flex: 1 0 25%;"
                        onclick="inputOperator('/')">/</button>
                    <button type="button" class="btn btn-warning" style="flex: 1 0 25%;"
                        onclick="clearDisplay()">C</button>
                    <button type="button" class="btn btn-info" style="flex: 1 0 25%;"
                        onclick="deleteLastCharacter()">âŒ«</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Memasukkan jQuery dan Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Memasukkan kode JavaScript untuk menghitung -->
    <script>
        // Mendapatkan elemen display dan buttons
        var display = document.getElementById("calculator-display");
        var buttons = document.getElementById("calculator-buttons");

        // Mendeklarasikan variabel untuk menyimpan angka pertama, operator, dan status desimal
        var firstNumber = null;
        var operator = null;
        var decimal = false;

        // Fungsi untuk memasukkan angka ke display
        function inputNumber(number) {
            // Jika display masih 0, ganti dengan angka yang dimasukkan
            if (display.innerHTML == "0") {
                display.innerHTML = number;
            } else {
                // Jika display sudah ada angka, tambahkan angka yang dimasukkan
                display.innerHTML += number;
            }
            // Mengembalikan warna tombol yang sudah ditekan ke warna normal
            resetButtonColor();
        }

        // Fungsi untuk memasukkan operator ke display
        function inputOperator(op) {
            // Jika angka pertama dan operator masih null, simpan angka pertama dan operator dari display
            if (firstNumber == null && operator == null) {
                firstNumber = parseFloat(display.innerHTML);
                operator = op;
                // Tambahkan spasi di sekitar operator untuk memisahkan angka
                display.innerHTML += " " + op + " ";
                // Setel status desimal menjadi false
                decimal = false;
            } else {
                // Jika angka pertama dan operator sudah ada, hitung hasil dan simpan sebagai angka pertama
                calculate();
                // Simpan operator baru dari input
                operator = op;
                // Tambahkan spasi di sekitar operator untuk memisahkan angka
                display.innerHTML += " " + op + " ";
                // Setel status desimal menjadi false
                decimal = false;
            }
            // Mengembalikan warna tombol yang sudah ditekan ke warna normal
            resetButtonColor();
        }

        // Fungsi untuk memasukkan desimal ke display
        function inputDecimal() {
            // Jika status desimal masih false, tambahkan titik desimal ke display
            if (!decimal) {
                display.innerHTML += ".";
                // Setel status desimal menjadi true
                decimal = true;
            }
            // Mengembalikan warna tombol yang sudah ditekan ke warna normal
            resetButtonColor();
        }

        // Fungsi untuk menghitung hasil dari display
        function calculate() {
            // Jika angka pertama dan operator sudah ada, ambil angka kedua dari display
            if (firstNumber != null && operator != null) {
                var secondNumber = parseFloat(display.innerHTML.split(" ").pop());
                // Mendeklarasikan variabel untuk hasil
                var hasil;

                // Melakukan perhitungan sesuai operator
                switch (operator) {
                    case "+":
                        hasil = firstNumber + secondNumber;
                        break;
                    case "-":
                        hasil = firstNumber - secondNumber;
                        break;
                    case "*":
                        hasil = firstNumber * secondNumber;
                        break;
                    case "/":
                        hasil = firstNumber / secondNumber;
                        break;
                    default:
                        hasil = "Operator tidak valid";
                }

                // Menampilkan hasil di display
                display.innerHTML = hasil;
                // Menyimpan hasil sebagai angka pertama
                firstNumber = hasil;
                // Mengosongkan operator
                operator = null;
                // Setel status desimal menjadi false
                decimal = false;
            }
            // Mengembalikan warna tombol yang sudah ditekan ke warna normal
            resetButtonColor();
        }

        // Fungsi untuk mengosongkan display
        function clearDisplay() {
            // Mengosongkan display
            display.innerHTML = "0";
            // Mengosongkan angka pertama dan operator
            firstNumber = null;
            operator = null;
            // Setel status desimal menjadi false
            decimal = false;
            // Mengembalikan warna tombol yang sudah ditekan ke warna normal
            resetButtonColor();
        }

        // Fungsi untuk menghapus karakter terakhir dari display
        function deleteLastCharacter() {
            // Mendapatkan nilai display saat ini
            var displayValue = display.innerHTML;
            // Jika display tidak kosong atau 0, hapus karakter terakhir
            if (displayValue != "" && displayValue != "0") {
                // Menghapus karakter terakhir dengan menggunakan slice
                displayValue = displayValue.slice(0, -1);
                // Jika display menjadi kosong setelah menghapus, ganti dengan 0
                if (displayValue == "") {
                    displayValue = "0";
                }
                // Menampilkan nilai baru di display
                display.innerHTML = displayValue;
            }
            // Mengembalikan warna tombol yang sudah ditekan ke warna normal
            resetButtonColor();
        }

        // Fungsi untuk mengembalikan warna tombol yang sudah ditekan ke warna normal
        function resetButtonColor() {
            // Mendapatkan semua elemen tombol
            var buttonElements = buttons.getElementsByTagName("button");
            // Melakukan iterasi untuk setiap tombol
            for (var i = 0; i < buttonElements.length; i++) {
        //                // Menghapus kelas active yang membuat warna tombol menjadi gelap
                    buttonElements[i].classList.remove("active");
                }
            }

            // Menambahkan event listener untuk keyboard input
            document.addEventListener("keydown", function (event) {
                // Mendapatkan tombol yang ditekan
                var key = event.key;
                // Melakukan aksi sesuai tombol yang ditekan
                switch (key) {
                    case "0":
                    case "1":
                    case "2":
                    case "3":
                    case "4":
                    case "5":
                    case "6":
                    case "7":
                    case "8":
                    case "9":
                        // Jika tombol angka, panggil fungsi inputNumber dengan parameter angka yang ditekan
                        inputNumber(parseInt(key));
                        break;
                    case "+":
                    case "-":
                    case "*":
                    case "/":
                        // Jika tombol operator, panggil fungsi inputOperator dengan parameter operator yang ditekan
                        inputOperator(key);
                        break;
                    case ".":
                        // Jika tombol titik, panggil fungsi inputDecimal
                        inputDecimal();
                        break;
                    case "=":
                    case "Enter":
                        // Jika tombol sama dengan atau enter, panggil fungsi calculate
                        calculate();
                        break;
                    case "c":
                    case "C":
                        clearDisplay();
                    case "Backspace":
                        // Jika tombol backspace, panggil fungsi deleteLastCharacter
                        deleteLastCharacter();
                        break;
                    case "Delete":
                        // Jika tombol c, C, backspace, atau delete, panggil fungsi clearDisplay
                        clearDisplay();
                        break;
                    default:
                        // Jika tombol lain, tidak melakukan apa-apa
                        break;
                }
            });
        </script>
</body>
</html>
